<tc_include file="Public:hp:head" />
<!DOCTYPE html>
<!-- saved from url=(0048) -->
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <title>主页</title>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="{$CSS_URL}planeui.css"/>
    <link href="{$CSS_URL}bootstrap.css" rel="stylesheet">
    <!--<link href="tehuigou/css/style.css" rel="stylesheet">-->
    <!--<link rel="stylesheet" href="tehuigou/assets/css/app.css">-->
    <link href="{$CSS_URL}mbase.css" rel="stylesheet">
    <link rel="alternate icon" type="image/png" href="assets/i/favicon.png">
    <link rel="stylesheet" href="{$CSS_URL}amazeui.min.css">

    <style>
        html, body {
            background-color: #F0F3FA;
        }

        .col-xs-4 {
            padding-left: 0;
            padding-right: 0;
        }

        .btn {
            padding: 26px 12px;
        }

        .col-xs-6 {
            padding-left: 0;
            padding-right: 0;
        }

        .sms {
            position: absolute;
            top: 13px;
            left: 32%
        }

        .first {
            margin: auto;
            height: 420px;
        }


        #chart-panel {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            padding: 10px;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        .right-container .right-panel {
            padding: 10px;
            padding-left: 15px;
        }

        #main-container {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            top: 50px;
        }


            #chart-demo {
                left: 0;
            }


        #chart-demo {
            position: absolute;
            /*top: 50px;*/
            right: 0;
            bottom: 0;
            /*overflow: hidden;*/
            }
    </style>
</head>
<body>
<!-- 导航	-->

<!-- Bootstrap 公众账号首页已经引入bootstrap.css-->
<!-- 新 Bootstrap 核心 CSS 文件 -->
<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
<script src="//cdn.bootcss.com/echarts/3.2.2/echarts.min.js"></script>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->


<script>
    var jQueryf = jQuery.noConflict();
    //mootools中嵌入jQuery 需要启动jQuery无冲突模式
</script>
<script type="text/javascript">

    (function () {

        isBind = false;
        //普通页面不需要验证
        ret = [];
        ret.resCode = "00";
        if (ret) {
            if (ret && ret.resCode == "00") {
                isBind = true;
            }
            else {
                Portal.error("请先app账号")
                //alert(window.location.pathname)
                window.location.href = "/wechat/register/wbinduser.htm?userName=" + ret.openId + "&appUserName=" + appid + "&backPath=" + window.location.pathname;
            }
        }

        //使用js原始方法，勿改
        var muObj = document.getElementById("index");
        if (muObj) {
            muObj.className = "active";
        }

        /* 注销 */
        function doLogout() {
            DWR.call("userService.logout", function () {
                document.location.href = "../index.htm"
            });
        }
    })(jQueryf)


</script>

<div id="preloader">
    <div class="pui-loading pui-loading-double-circle-rotation loder_status">
        <span></span>
        <span></span>
    </div>
</div>
<!-- Fixed navbar -->
<div class="row margin0">
    <!-- center-->

    <div data-am-widget="intro" class="am-intro am-cf am-intro-default">

        <div class="am-intro-hd" style="height: 60px;line-height: 60px;">
            <h2 class="am-intro-title" style="padding-left:15px"><img width="38px" src="{$IMG_URL}join_icon.png">  |  <span>参与成员分布</span></h2>
        </div>
    </div>
</div>
<div id="chart-demo">
<div id="main-container" style="top: 0px;width: 100%;">
    <div class="right-container" style="left: 0%; width: 100%;">
        <div id="chart-panel" class="right-panel" style=" width: 100%;height: 600px"></div>

    </div>
</div>
</div>


<!--[if (gte IE 9)|!(IE)]><!-->
<script src="{$JS_URL}jquery.min.js"></script>
<!--<![endif]-->
<!--[if lte IE 8 ]>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="{$JS_URL}amazeui.ie8polyfill.min.js"></script>
<![endif]-->
<script src="{$JS_URL}amazeui.min.js"></script>

<!-- center -->
<!-- JavaScript-->

<script type="text/javascript">
    jQuery(window).load(function () { // makes sure the whole site is loaded
        jQuery("#status").fadeOut(); // will first fade out the loading animation
        jQuery("#preloader").delay(350).fadeOut("slow"); // will fade out the white DIV that covers the website.
    })

    // 基于准备好的dom，初始化echarts实例
//    var myChart = echarts.init(document.getElementById('main'));
//
//    // 指定图表的配置项和数据
//    var option = {
//        title: {
//            text: 'ECharts 入门示例'
//        },
//        tooltip: {},
//        legend: {
//            data:['销量']
//        },
//        xAxis: {
//            data: ["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]
//        },
//        yAxis: {},
//        series: [{
//            name: '销量',
//            type: 'bar',
//            data: [5, 20, 36, 10, 10, 20]
//        }]
//    };
//
//    // 使用刚指定的配置项和数据显示图表。
//    myChart.setOption(option);


    var app = echarts.init(document.getElementById('chart-panel'));
    var url = '__SELF__';


    app.title = '折柱混合';

    option = {
        title: {
            text:'医生人数（位）'
        },
        tooltip: {
            trigger: 'axis',
            padding: '100'
        },
        toolbox: {
//            feature: {
//                restore: {show: true}
//            }
        },
        legend: {
            padding: 50,
            left: 'center',
            data:['主任医师','副主任医师','主治医师','住院医师']
        },
        grid: {
            left: '3%',
            right: '12%',
            bottom: '3%',
            top: '16%',
            containLabel: true
        },
        yAxis: [
            {
                type: 'category',
//                data: ['华东地区','华中地区','华南地区','华北地区','西北地区','西南地区','东北地区','台港澳地区']
                data: ['华东','华南','华中','东北','西南','西北','华北','台港澳']
            }
        ],
        xAxis: [
            {
                type: 'value',
                name: '人数',
//                min: 0,
//                max: 250,
//                interval: 50,
                axisLabel: {
                    formatter: '{value} '
                }
            },
            {
                type: 'value',
                name: '人数',
//                min: 0,
//                max: 250,
//                interval: 50,
                axisLabel: {
                    formatter: '{value} '
                }
            }
        ],
        series: [
            {
                name:'主任医师',
                type:'bar',
                data:[]
//                data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2]
            },
            {
                name:'副主任医师',
                type:'bar',
                data:[]
//                data:[2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2]
            },
            {
                name:'主治医师',
                type:'bar',
                data:[]
//                data:[2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4]
            },
            {
                name:'住院医师',
                type:'bar',
                data:[]
//                data:[2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4]
            }
        ]
    };

    app.setOption(option);


    $.ajax({
        type : "post",
        async : true,            //异步请求（同步请求将会锁住浏览器，用户其他操作必须等待请求完成才可以执行）
        url : url,    //请求发送到TestServlet处
        data : "aa=5",
        dataType : "json",        //返回数据形式为json
        success : function(result) {
            //请求成功时执行该函数内容，result即为服务器返回的json对象
            var professor=[];    //类别数组（实际用来盛放X轴坐标值）
            var associateProfessor=[];    //类别数组（实际用来盛放X轴坐标值）
            var attendingDoctor=[];    //类别数组（实际用来盛放X轴坐标值）
            var residentDoctor=[];    //类别数组（实际用来盛放X轴坐标值）
            if (result) {
                for(var i=0;i<result.count;i++){

                    professor[result[i].id-1] = result[i].professor;
                    associateProfessor[result[i].id-1] = result[i].associateprofessor;
                    attendingDoctor[result[i].id-1] = result[i].attendingdoctor;
                    residentDoctor[result[i].id-1] = result[i].residentdoctor;

                }
                app.hideLoading();    //隐藏加载动画
                app.setOption(option = {
//                    xAxis: [
//                        {
//                            type: 'value',
//                            name: '人数',
//                            min: 0,
//                            max: 250,
//                            interval: 50,
//                            axisLabel: {
//                                formatter: '{value} '
//                            }
//                        }
//                    ],
                    series: [
                        {
                            name:'主任医师',
                            type:'bar',
                            data:professor
                        },
                        {
                            name:'副主任医师',
                            type:'bar',
                            data:associateProfessor
                        },
                        {
                            name:'主治医师',
                            type:'bar',
                            data:attendingDoctor
                        },
                        {
                            name:'住院医师',
                            type:'bar',
                            data:residentDoctor
//                data:[2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4]
                        }
                    ]
                });

            }

        },
        error : function(errorMsg) {
            //请求失败时执行该函数
            alert("图表请求数据失败!");
            app.hideLoading();
        }
    })

</script>
</body>
</html>
